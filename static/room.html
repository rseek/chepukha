<!-- templates/room.html  (–≤–∞—Ä–∏–∞–Ω—Ç¬†A) -->
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ß–µ–ø—É—Ö–∞¬†‚Äî Light</title>

<!-- 1) —Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–º—É –∏–∑ query‚Äë—Å—Ç—Ä–æ–∫–∏ -->
<script>
const urlParams = new URLSearchParams(location.search);
const curTheme  = urlParams.get("theme") || "light";
const otherLink = curTheme === "dark"
  ? `<a id="theme-link" href="?theme=light" style="float:right">‚òÄÔ∏è Light</a>`
  : `<a id="theme-link" href="?theme=dark"  style="float:right">üåô Dark</a>`;
document.write(otherLink);        // –≤—Å—Ç–∞–≤–ª—è–µ–º –ø—Ä—è–º–æ –≤¬†DOM
</script>

<style>
:root {
  --main: #333;
  --accent: #0d6efd;
  --border: #ddd;
  --bg: #fff;
}
body {
  font-family: system-ui, sans-serif;
  margin: 0 auto; max-width: 640px; padding: 24px;
  color: var(--main); background: var(--bg);
}
h2 { margin-top: 1.2em }
.hidden { display:none }
button{
  padding:8px 16px;border:1px solid var(--accent);
  background:var(--accent);color:#fff;border-radius:4px;
  cursor:pointer;font-size:1rem
}
button:disabled{opacity:.4;cursor:default}
textarea{
  width:100%;min-height:60px;padding:8px;
  border:1px solid var(--border);border-radius:4px;
  resize:vertical;font-size:1rem
}
#players ul{margin:.5em 0;padding-left:1.2em}
#players li{list-style:"üë§ ";margin:.25em 0}
#visible-block{border:1px solid var(--border);padding:12px;border-radius:6px;margin:12px 0;background:#fafafa}
#wait{color:var(--accent);font-style:italic;margin:12px 0}
pre{white-space:pre-wrap;border:1px solid var(--border);padding:8px;border-radius:4px;background:#f8f9fa}
</style>
</head>
<body>
  <h1>–ß–µ–ø—É—Ö–∞</h1>

  <div id="players"></div>
  <button id="start" class="hidden">–ù–∞—á–∞—Ç—å</button>

  <div id="visible-block" class="hidden">
      <div id="visible-from" style="font-size:.9em;color:#555;margin-bottom:4px"></div>
      <div class="visible-text" style="white-space:pre-wrap;"></div>
  </div>

  <div id="wait" class="hidden">–û–∂–∏–¥–∞–µ–º –ª–∏—Å—Ç–∏–∫...</div>

  <form id="form" class="hidden">
      <textarea id="hidden" placeholder="–ë—É–¥–µ—Ç –∑–∞–≤—ë—Ä–Ω—É—Ç–æ - —Å–ª–µ–¥—É—é—â–∏–π –Ω–µ —É–≤–∏–¥–∏—Ç —Ç–µ–∫—Å—Ç –∏–∑ —ç—Ç–æ–≥–æ –ø–æ–ª—è"></textarea><br>
      <button id="wrap-btn" type="button">–ó–∞–≤–µ—Ä–Ω—É—Ç—å</button>

      <div id="second-step" class="hidden" style="margin-top:8px">
          <textarea id="visible" placeholder="–í–∏–¥–∏–º–∞—è —á–∞—Å—Ç—å - —Å–ª–µ–¥—É—é—â–∏–π —É–≤–∏–¥–∏—Ç —Ç–µ–∫—Å—Ç –∏–∑ —ç—Ç–æ–≥–æ –ø–æ–ª—è"></textarea><br>
          <button type="submit">–ü–µ—Ä–µ–¥–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–º—É</button>
      </div>
  </form>

  <div id="final" class="hidden">
      <h2>–ü–æ–ª—É—á–∏–ª–∞—Å—å –∫–∞–∫–∞—è-—Ç–æ —á–µ–ø—É—Ö–∞:</h2>
      <ul id="final-list"></ul>
  </div>

<script src="/static/main.js"></script>
</body>
</html>
